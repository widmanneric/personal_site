var resizeTimeout,showTimeout,isReducedSize=!1,lockControls=!1,lockMusic=!1;function jumpToPage(e){blockHideBlog=!0,isReducedSize?$(".mainMenu").css({transform:"scale(.7) translateY(100%)"}):$(".mainMenu").css({transform:"scale(.5) translate(144%,130%) "});let o=$(".block").eq(2);o.closest(".option").addClass("blocklock"),animateOption(o),transitionPage($(".blogContainer"));let t=$(`.customLink[target=${e}]`);console.log(t),$(".blogContainer .codeSection").hide(),$(`.${e}`).show(),$(".blogClose").show(),setTimeout(()=>blockHideBlog=!1,1e3)}function checkArrow(e){clearTimeout(showTimeout);let o=e[0].scrollTopMax,t=e[0].scrollTop;Math.abs(o-t)<20||o<=20?$(".scrollArrow").fadeOut():showTimeout=setTimeout(()=>$(".scrollArrow").fadeIn(),500)}function checkScreenSize(){Math.max(document.documentElement.clientWidth,window.innerWidth||0)<=700&&(isReducedSize=!0,$(".sidebar").addClass("reduced"))}function applyControls(){$(".waveTarget").off("mouseenter"),$(".waveTarget").on("mouseenter",async function(){if($(this).hasClass("lock")||isReducedSize)return;let e=$(this).find("span");for(let o of e)await animateSpan($(o),$(this))}),$(".waveTarget").off("click touch"),$(".waveTarget").on("click touch",function(){$(this).mouseleave()}),$(".option:not(.music)").off("click touch"),$(".option:not(.music)").on("click touch",function(){if(lockMusic=!0,window.history.replaceState("","","/"),$(this).hasClass("lock")||$(this).hasClass("blocklock")||lockControls)return;let e=$(this);!$(".mainMenu").attr("style")?phaseOutMainMenu().then(()=>{$(`.${e.attr("target")}`).removeClass("mini"),$(".scrollArrow").removeClass("mini"),checkArrow($(`.${e.attr("target")}`))}):transitionPage($(`.${e.attr("target")}`))}),$(".option:not(.music)").on("click touch",function(){if($(this).hasClass("blocklock")||lockControls)return;$(".blocklock").addClass("unanimateTarget"),$(this).addClass("blocklock"),!$(".mainMenu").attr("style")?setTimeout(function(e){animateOption(e)},2800,$(this).find(".block")):animateOption($(this).find(".block"))}),$(".sidebar").off("scroll"),$(".sidebar").on("scroll",function(e){checkArrow($(this))}),$(window).off("resize"),$(window).on("resize",e=>{clearTimeout(resizeTimeout),checkScreenSize(),resizeTimeout=setTimeout(()=>{console.log("resizeend");let e=$(".sidebar:not(.mini)");e[0].scrollTopMax&&(e[0].scrollTopMax<=20?$(".scrollArrow").fadeOut():$(".scrollArrow").fadeIn())},500)}),$(".customLink").off("click touch"),$(".customLink").on("click touch",function(){let e=$(this).attr("target");console.log(e),window.history.replaceState("","",`/?p=${e}`),$(".blogContainer .codeSection").fadeOut(200,()=>{$(`.${e}`).fadeIn(200),$(".blogClose").fadeIn(200),checkArrow($(".blogContainer"))})}),$(".blogClose").off("click touch"),$(".blogClose").on("click touch",()=>{window.history.replaceState("","","/"),$(".blogContainer .description.article, .blogContainer .portrait, .blogTitle").fadeOut(200),$(".blogClose").fadeOut(200,()=>$(".blogContainer .codeSection").fadeIn(200)),setTimeout(()=>checkArrow($(".blogContainer")),300)}),$("body").off("keypress"),$("body").on("keypress",e=>{109!=e.which||0!=$(".music:visible").length||lockMusic?$("body").off("keypress"):($(".music").fadeIn(500),$("body").off("keypress"))}),$(".music").off("click touch"),$(".music").on("click touch",()=>{console.log(window.open),window.open("https://soundcloud.com/guttergunk","_blank").focus()})}function phaseOutMainMenu(){return $(".control").off("mouseenter click touch"),new Promise((e,o)=>{let t=$(".mainMenu"),i="144%",n="130%",l=".5";isReducedSize&&(i="0%",n="100%",l=".7");t.velocity({scale:l},{duration:600,easing:"swing"}).velocity({translateX:i,translateY:n},{easing:"swing",duration:600,complete:()=>{applyControls(),$(".mainMenu").addClass("miniMenu"),lockControls=!1,e()}})})}function animateSpan(e,o){return o.off("mouseleave"),o.one("mouseleave",function(){o.addClass("lock"),o.find("span").velocity("stop"),function(){let e=o.find("span");e.velocity({translateY:"0px",color:"#000000"},{duration:200,easing:"linear"});let t=setTimeout(function i(){let n=0;let l=e.length;e.each(function(){$(this).attr("style").includes("translateY(0px)")?n++:$(this).velocity({translateY:"0px",color:"#000000"},{duration:200,easing:"linear"})});n==l?(o.removeClass("lock"),clearTimeout(t)):t=setTimeout(i,220)},220)}()}),new Promise((t,i)=>{const n=10,l=200,s=100;o.hasClass("lock")?t():(e.velocity({translateY:`-${n}px`},{duration:l,easing:"swing",loop:!0}),setTimeout(()=>{t()},s))})}function animateOption(e){let o="swing",t="4";return isReducedSize&&(t="3",o="linear"),new Promise((i,n)=>{$(".unanimateTarget .block").velocity({scaleX:"1"},{easing:o,duration:200,complete:()=>{lockControls=!1,$(".unanimateTarget").removeClass("blocklock"),$(".unanimateTarget").removeClass("unanimateTarget")}}),e.velocity({scaleX:t},{easing:o,duration:200,complete:i})})}function transitionPage(e){console.log(e),e.scrollTop(0);if(isReducedSize)return $(".sidebar:not(.mini)").addClass("mini"),e.removeClass("mini"),void setTimeout(()=>hideBlog(),300);$(".scrollArrow").fadeOut(),new Promise((e,o)=>{0!=$(".sidebar:not(.mini)").length?$(".sidebar:not(.mini)").velocity({left:"-50%"},{easing:"swing",duration:500,complete:e}):e()}).then(()=>{checkArrow(e);let o=$(".sidebar:not(.mini)");o.addClass("mini"),e.removeClass("mini"),setTimeout(()=>{o.css("left",""),hideBlog()},700)})}window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,1)},0)}),$(document).ready(()=>{$(".scrollArrow").hide(),checkScreenSize();let e=new URL(window.location.href).searchParams.get("p");e&&$(`.${e}`).length>0&&jumpToPage(e),applyControls(),$(".mainMenu").show(),setTimeout(()=>$(".mainMenu").addClass("initFadeInMainMenu"),500)});var blockHideBlog=!1;function hideBlog(){blockHideBlog||($(".blogContainer .description.article, .blogContainer .portrait, .blogTitle").hide(),$(".blogContainer .codeSection").show(),$(".blogClose").hide())}!function(e){"scrollTopMax"in e||Object.defineProperties(e,{scrollTopMax:{get:function(){return this.scrollHeight-this.clientHeight}},scrollLeftMax:{get:function(){return this.scrollWidth-this.clientWidth}}})}(Element.prototype);